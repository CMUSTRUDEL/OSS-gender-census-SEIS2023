# ESEM2022-Census
Code and figures of ESEM 2022 submission

## Figure: Results
<table style="width:100%">
  <tr>
    <th>Ecosystem</th>
    <th>Contributor Line Graph</th>
    <th>Contributor Bar Graph</th>
    <th>Commit Line Graph</th>
    <th>Commit Bar Graph</th>
  </tr>
  <tr>
    <td>All</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/All_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/All_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/All_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/All_commit.png"></td>
  </tr>
  <tr>
    <td>Atom</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/Atom_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/Atom_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/Atom_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/Atom_commit.png"></td>
  </tr>
  <tr>
   <td>Bower</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/Bower_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/Bower_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/Bower_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/Bower_commit.png"></td>
  </tr>
  <tr>
    <td>Cargo</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/Cargo_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/Cargo_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/Cargo_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/Cargo_commit.png"></td>
  </tr>
  <tr>
    <td>Clojars</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/Clojars_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/Clojars_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/Clojars_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/Clojars_commit.png"></td>
  </tr>
  <tr>
    <td>CocoaPods</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/CocoaPods_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/CocoaPods_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/CocoaPods_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/CocoaPods_commit.png"></td>
  </tr>
  <tr>
    <td>CPAN</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/CPAN_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/CPAN_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/CPAN_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/CPAN_commit.png"></td>
  </tr>
  <tr>
    <td>CRAN</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/CRAN_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/CRAN_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/CRAN_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/CRAN_commit.png"></td>
  </tr>
  <tr>
    <td>Go</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/Go_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/Go_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/Go_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/Go_commit.png"></td>
  </tr>
  <tr>
    <td>Hackage</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/Hackage_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/Hackage_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/Hackage_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/Hackage_commit.png"></td>
  </tr>
  <tr>
    <td>Hex</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/Hex_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/Hex_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/Hex_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/Hex_commit.png"></td>
  </tr>
  <tr>
    <td>Maven</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/Maven_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/Maven_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/Maven_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/Maven_commit.png"></td>
  </tr>
  <tr>
   <td>Meteor</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/Meteor_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/Meteor_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/Meteor_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/Meteor_commit.png"></td>
  </tr>
  <tr>
   <td>NPM</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/NPM_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/NPM_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/NPM_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/NPM_commit.png"></td>
  </tr>
  <tr>
    <td>NuGet</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/NuGet_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/NuGet_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/NuGet_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/NuGet_commit.png"></td>
  </tr>
  <tr>
    <td>Packagist</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/Packagist_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/Packagist_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/Packagist_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/Packagist_commit.png"></td>
  </tr>
  <tr>
    <td>PlatformIO</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/PlatformIO_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/PlatformIO_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/PlatformIO_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/PlatformIO_commit.png"></td>
  </tr>
  <tr>
    <td>Pub</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/Pub_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/Pub_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/Pub_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/Pub_commit.png"></td>
  </tr>
  <tr>
    <td>Pypi</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/Pypi_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/Pypi_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/Pypi_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/Pypi_commit.png"></td>
  </tr>
  <tr>
    <td>Rubygems</td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/01_contributor_line/Rubygems_contributor.png"></td>
     <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/02_contributor_bar/Rubygems_contributor.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/03_commit_line/Rubygems_commit.png"></td>
    <td><img src="https://github.com/wingardium-leviosa/ESEM2022-Census/blob/main/census_graphs/04_commit_bar/Rubygems_commit.png"></td>
  </tr>
</table>

<table>
  <tr>
    <td>linear scale</td>
    <td>log scale</td>
  </tr>
  <tr>
    <td><img src="https://user-images.githubusercontent.com/40445229/150443594-5274ee3c-ac11-4b8d-b09b-faae2109ae4d.png"></td>
    <td><img src="https://user-images.githubusercontent.com/40445229/150443593-2f82125b-bbc5-4fdc-a85f-0a4a3d84df5b.png"></td>
  </tr>
</table>

### Most popular names for female and male contributors on GHTorrent
<table>
  <tr>
    <td>male</td>
    <td>female</td>
  </tr>
  <tr>
    <td><img src="https://user-images.githubusercontent.com/40445229/150443662-86bf54bc-d4f5-43b0-b1d4-815c599305dd.png"></td>
    <td><img src="https://user-images.githubusercontent.com/40445229/150443663-a0f748b7-e360-498e-bcb5-a641675397e1.png"></td>
  </tr>
</table>

# OSS Census Public Files
### Gender Inference
Under census/public/gender_inference.

### Census Data
Under census/public.
We process the projects from the 20 OSS ecosystems according to libraries.io and the projects written in the 15 most popular in the ghtorrent projects table. Ranking by size, the 20 ecosystems are NPM, Packagist, Go, Pypi, Rubygems, NuGet, Maven, Bower, CocoaPods, Cargo, Clojars, Atom, CPAN, Meteor, Hackage, Hex, Pub, CRAN, Puppet, PlatformIO. Ranking by size, the 15 languages are 1) JavaScript, 2) Java, 3) Python, 4) HTML, 5) Ruby, 6) PHP, 7) C++, 8) CSS, 9) C, 10) C#, 11) Jupyter Notebook, 12) Shell, 13) TypeScript, 14) Go, 15) Objective-C. For all the following scripts, we group the results by project language in the project table.
00_get_proj_lst_from_lio: find all projects' id in ghtorrent through their entries in libraries.io database. Use sql to identify the 20 most popular ecosystems.
01_get_proj_lst_from_ght: use sql to identify the 15 most popular languages. Get project_id of all projects written in one of the 15 specified language.
02_get_comits_for_proj : get the commits for each project in the lists from step 1. Each project has a csv file containing author id, window of commit, author name, author email, and whether is fake. All projects have at least 1 valid commits, aka made by users with valid login and name (filtered out users that can't be found in users_private and type ORG in users).
03_find_possible_bots_in_commits: find the people who made made at least 1000 commits in a window, and then manually inspect the output to get a bot list. `bot_names.list` contains manually inspect bot list. Retrieved by `get_bots_in_commits.py`. Part of the results are retrieved from project https://github.com/CMUSTRUDEL/new_female_contrs_CSCW. The executions of all files below can be interrupted and resumed without loss of output data.
04_get_alias_dict_for_repo: get all dictionaries for projects that have authors that can be merged. alias_merge.py contains a helper function, and alias defines an Alias object which is used in alias_merge.py.
05_clean_author_for_commits: merge alias and label bots, using results from running 4 and 5. Filter out projects with less than 3 contributors (before merging) for public projects (projects extracted through 01_get_proj_lst_from_ght).
06_clean_proj_lst: make the proj list more concise. Improves coding efficiency.
07_build_contrib_dict: find core contributors for each project for each window. For each language, for each project, build dictionary in the format of {win:{uid:[isCore, gender, #commits]}}. 
08_contrib_info: find each contributor's first and last commit window in each ecosystem. These results are used for survival analysis, the complete code of which is under census/public/survival.
09_contrib_gender_by_win: get by window by gender contributor counts for all and core contributors.
10_commit_gender_by_win: get by window by gender commit counts.
11_proj_count_by_gender: get by window number of active projects and active female-participated projects.
12_homophily_tie_by_gender: calculate homophily tie between female and male.
13_most_diverse_proj_owners: find the 50 projects with the most female contributors in each ecosystem.

### Visualization
Under census/public/visualization.
